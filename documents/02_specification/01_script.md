## 各コマンドの仕様について
==

----

## 1.write_to_td

#### 1.1.用途
* 引数で指定したKPIに対し、'データ集計' 〜 'TreasureData'上のテーブルに書き出し までを行うコマンド。

#### 1.2.引数
* 第一引数
  * データベース名。
* 第二引数
  * 処理対象のKPI名。
* 第三引数
  * データの取得開始時刻。
  * `yyyy-mm-dd hh:mm:ss` 形式で指定すること。
* 第四引数
  * データの取得終了時刻。
  * `yyyy-mm-dd hh:mm:ss` 形式で指定すること。
  * 終点は含まないことに注意。例えば、`2017-01-02 00:00:00` とした場合、`2017-01-01 23:59:59` までのレコードが集計対象となる。
* 第五引数
  * 設定ファイルを格納したディレクトリのパス。
  * 省略した場合は、環境変数 `TD_UTIL_CONFIG_PATH` で設定したディレクトリを参照する。
* 第六引数
  * 結果のログ出力先となるディレクトリのパス。
  * 省略した場合は、環境変数 `TD_UTIL_LOG_PATH` で設定したディレクトリを参照する。

#### 1.3.実行例
* 以下のように実行する。
* この場合、アスカ零の 2017年1月1日のDAUが集計される。

```
python3 write_to_td.py
  'asukazero'
  'player_num_seg_all'
  '2017-01-01 00:00:00'
  '2017-01-02 00:00:00'
  '/home/sample_user/td_util_config'
  '/home/sample_user/td_util_result_log'
```

#### 1.4実運用上のメモ
* 実運用では、ジョブスケジューラを使い、以下のように実行する。
  * (タイトル数) * (KPI数)で、上記のスクリプトを実行する。
  * 「セグメントに関するKPI」「通常のKPI」の順番で実行する。
